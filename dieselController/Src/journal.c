/*
 * log.c
 *
 *  Created on: Jun 26, 2020
 *      Author: 79110
 */
/*----------------------- Includes ------------------------------------------------------------------*/
#include "journal.h"
#include "dataAPI.h"
/*----------------------- Structures ----------------------------------------------------------------*/
/*----------------------- Constant ------------------------------------------------------------------*/
/*----------------------- Variables -----------------------------------------------------------------*/
/*----------------------- Functions -----------------------------------------------------------------*/

/*---------------------------------------------------------------------------------------------------*/
/*----------------------- PRIVATE -------------------------------------------------------------------*/
/*---------------------------------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------------------------------*/
/*----------------------- PABLICK -------------------------------------------------------------------*/
/*---------------------------------------------------------------------------------------------------*/
LOG_STATUS eLOGmakeRecord ( SYSTEM_EVENT event, LOG_RECORD_TYPE* record )
{
  LOG_STATUS res  = LOG_STATUS_ERROR;
  RTC_TIME   time = { 0U };

  if ( eRTCgetTime( &time ) == RTC_OK )
  {
    record->event = event;
    record->time  = SET_LOG_DATE( time.day, time.month, time.year, time.hour, time.min, time.sec );
    res           = LOG_STATUS_OK;
  }
  return res;
}
/*---------------------------------------------------------------------------------------------------*/
LOG_STATUS eLOGaddRecord ( LOG_RECORD_TYPE* record )
{
  LOG_STATUS res  = LOG_STATUS_ERROR;
  if ( eDATAAPIlog( DATA_API_CMD_ADD, 0U, record ) == DATA_API_STAT_OK )
  {
    res = LOG_STATUS_OK;
  }
  return res;
}
/*---------------------------------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------------------------------*/
